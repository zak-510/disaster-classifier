
            <!DOCTYPE html>
            <html>
            <head>
                <title>Damage Assessment Report - {{ disaster_name }}</title>
                <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
                <style>
                    body { font-family: Arial, sans-serif; margin: 20px; }
                    .tab { overflow: hidden; border: 1px solid #ccc; background-color: #f1f1f1; }
                    .tab button { background-color: inherit; float: left; border: none; outline: none; cursor: pointer; padding: 14px 16px; transition: 0.3s; }
                    .tab button:hover { background-color: #ddd; }
                    .tab button.active { background-color: #ccc; }
                    .tabcontent { display: none; padding: 6px 12px; border: 1px solid #ccc; border-top: none; }
                    .stats-table { border-collapse: collapse; width: 100%; }
                    .stats-table th, .stats-table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                    .stats-table tr:nth-child(even) { background-color: #f2f2f2; }
                    .export-btn { margin: 10px; padding: 8px 16px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
                    .export-btn:hover { background-color: #45a049; }
                    .image-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; padding: 20px; }
                    .image-container { position: relative; }
                    .image-container img { width: 100%; height: auto; }
                    .image-caption { text-align: center; margin-top: 5px; }
                </style>
            </head>
            <body>
                <h1>Damage Assessment Report - {{ disaster_name }}</h1>
                <p>Generated: {{ timestamp }}</p>

                <div class="tab">
                    <button class="tablinks active" onclick="openTab(event, 'Overview')">Overview</button>
                    <button class="tablinks" onclick="openTab(event, 'Statistics')">Statistics</button>
                    <button class="tablinks" onclick="openTab(event, 'Visualizations')">Visualizations</button>
                    <button class="tablinks" onclick="openTab(event, 'Examples')">Examples</button>
                </div>

                <div id="Overview" class="tabcontent" style="display: block;">
                    <h2>Overview</h2>
                    <div id="overview-stats"></div>
                    <div id="overview-chart"></div>
                </div>

                <div id="Statistics" class="tabcontent">
                    <h2>Detailed Statistics</h2>
                    <div id="stats-table"></div>
                    <button class="export-btn" onclick="exportStats()">Export Statistics (CSV)</button>
                </div>

                <div id="Visualizations" class="tabcontent">
                    <h2>Interactive Visualizations</h2>
                    <div id="damage-distribution"></div>
                    <div id="confidence-distribution"></div>
                    <div id="confidence-boxplot"></div>
                </div>

                <div id="Examples" class="tabcontent">
                    <h2>Example Images</h2>
                    <div class="image-grid" id="example-images"></div>
                </div>

                <script>
                    function openTab(evt, tabName) {
                        var i, tabcontent, tablinks;
                        tabcontent = document.getElementsByClassName("tabcontent");
                        for (i = 0; i < tabcontent.length; i++) {
                            tabcontent[i].style.display = "none";
                        }
                        tablinks = document.getElementsByClassName("tablinks");
                        for (i = 0; i < tablinks.length; i++) {
                            tablinks[i].className = tablinks[i].className.replace(" active", "");
                        }
                        document.getElementById(tabName).style.display = "block";
                        evt.currentTarget.className += " active";
                    }

                    function exportStats() {
                        const stats = {{ stats_json }};
                        const csv = Papa.unparse(stats);
                        const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
                        saveAs(blob, '{{ disaster_name }}_statistics.csv');
                    }

                    // Plotly charts
                    {{ plotly_js }}
                </script>
            </body>
            </html>
            